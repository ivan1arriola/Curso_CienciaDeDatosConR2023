legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(aes(color = continent), size = 2, alpha = 0.3,  position = position_jitter(w = 0, h = 0.5)) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(aes(color = continent), size = 2, alpha = 0.3,  position = position_jitter(w = 0, h = 0.5)) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(aes(color = continent), size = 2, alpha = 0.3,  position = position_jitter(w = 0, h = 0.5)) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 2, h = 0.2)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0, h = 1)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 1, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.2, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.1, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.1, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.15, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.3, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.2, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
gapminder_2007 %>% ggplot(aes(y=lifeExp, x= gdpPercap, label = country)) +
geom_point(
aes(color = (gdpPercap > 5000 & lifeExp < 60)),
alpha = 0.8,
size = 3
) +
scale_color_manual(
values = c("FALSE" = "black", "TRUE" = "red")
) +
geom_text_repel(
color = "red",
data = subset(gapminder_2007, gdpPercap > 5000 & lifeExp < 60)
) +
scale_x_continuous(name="PBI per cápita") +
scale_y_continuous(name="Esperanza de vida al nacer en años") +
theme(legend.position = "none")
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.2, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
( Grafico2Parte1 <- gapminder %>%
ggplot(aes(x=fct_reorder(continent, lifeExp, median), y=lifeExp,)) +
geom_boxplot() +
scale_x_discrete(name = "Continente") +
scale_y_continuous(name = "Esperanza de vida al nacer en años") +
labs(caption = "Fuente: Datos de Gapminder") +
coord_flip()
)
( Grafico2Parte1 <- gapminder %>%
ggplot(aes(x=fct_reorder(continent, lifeExp, median), y=lifeExp,)) +
geom_boxplot() +
scale_x_discrete(name = "Continente") +
scale_y_continuous(name = "Esperanza de vida al nacer en años") +
labs(caption = "
ahora probando
") +
coord_flip()
)
( Grafico2Parte1 <- gapminder %>%
ggplot(aes(x=fct_reorder(continent, lifeExp, median), y=lifeExp,)) +
geom_boxplot() +
scale_x_discrete(name = "Continente") +
scale_y_continuous(name = "Esperanza de vida al nacer en años") +
labs(caption =
"ahora probando"
) +
coord_flip()
)
# Chunk 1: setup
knitr::opts_chunk$set(
echo = params[["show_answers"]],
include = params[["show_answers"]],
# echo = TRUE,
tidy.opts = list(width.cutoff = 50),
tidy = 'styler',
# tidy = TRUE,
fig.pos = 'h',
out.extra = '',
message = FALSE,
warning = FALSE
)
# Chunk 2
library(ggplot2)
library(gapminder)
library(forcats)
library(dplyr)
library(magrittr)
# Chunk 3
data(mpg)
glimpse(mpg)
# Chunk 4
mpg <- mpg %>%
mutate(TipoTraccion = ifelse(drv == "f", "Delantera",
ifelse(drv == "r", "Trasera", "4x4")))
# Chunk 5
graficoBase <- mpg %>% ggplot(aes(TipoTraccion))
# Chunk 6
(grafico1Parte1 <- graficoBase +
geom_bar(aes(fill= TipoTraccion)) +
scale_x_discrete(name="Tipo de traccion del vehiculo") +
scale_y_continuous(name = "Cantidad de vehículos") +
scale_fill_brewer(palette = "Dark2") +
theme(axis.ticks.x = element_blank())
)
# Chunk 7
(grafico1Parte2 <- graficoBase +
geom_bar(aes(y = prop.table(after_stat(count)), fill = TipoTraccion)) +
scale_x_discrete(name="Tipo de tracción del vehículo") +
scale_y_continuous(name = "Porcentaje de vehículos", labels = scales::percent) +
scale_fill_brewer(palette = "Dark2") +
theme(axis.ticks.x = element_blank()) +
geom_text(
aes(
y = prop.table(after_stat(count)),
label = scales::percent(prop.table(after_stat(count))) ),
stat = "count",
vjust = -0.5
)
)
# Chunk 8
data(gapminder)
glimpse(gapminder)
# Chunk 9
( Grafico2Parte1 <- gapminder %>%
ggplot(aes(x=fct_reorder(continent, lifeExp, median), y=lifeExp,)) +
geom_boxplot() +
scale_x_discrete(name = "Continente") +
scale_y_continuous(name = "Esperanza de vida al nacer en años") +
labs(caption =
"Se puede observar una diferencia considerable de Africa del resto de los continentes"
) +
coord_flip()
)
# Chunk 10
(
Grafico2Parte2 <- Grafico2Parte1 +
geom_point(
aes(color = continent),
size = 2,
alpha = 0.3,
position = position_jitter(w = 0.2, h = 0)
) +
scale_color_discrete(name = "Continente") +
theme(
legend.position = "bottom",
legend.title = element_text(size = 6),
legend.text = element_text(size = 6),
legend.key.size = unit(0.3, "cm")
)
)
# Chunk 11
( #Esperanza de vida al nacer a nivel mundial
world_avg <- gapminder %>% summarise(world_avg = mean(lifeExp))
)
( #Esperanza de vida al nacer por continente, ordenadas de menos a más
continent_avg <- gapminder %>% group_by(continent) %>% summarise(continent_avg = mean(lifeExp)) %>% arrange(continent_avg)
)
# Chunk 12
gapminder %>%
ggplot(
aes( x = lifeExp, y = fct_reorder(continent, lifeExp, median) )
) +
stat_summary(fun = mean, geom = "point", size = 2, alpha = 0.6) +
scale_x_continuous(name = "Esperanza de vida al nacer en años") +
scale_y_discrete(name = "Continentes") +
geom_point(
aes(color = continent),
alpha = 0.2,
size = 2,
position = position_jitter(w = 0, h = 0.2)
) +
scale_color_brewer (name = "Continentes", palette = "Dark2") +
geom_vline(data = world_avg, aes(xintercept = world_avg)) +
geom_segment(data = continent_avg, aes(x=continent_avg, y=continent, xend=world_avg$world_avg, yend=continent))
# Chunk 13
library(ggrepel)
gapminder_2007 <- gapminder %>% filter(year==2007)
glimpse(gapminder_2007)
# Chunk 14
gapminder_2007 %>% ggplot(aes(y=lifeExp, x= gdpPercap, label = country)) +
geom_point(
aes(color = (gdpPercap > 5000 & lifeExp < 60)),
alpha = 0.8,
size = 3
) +
scale_color_manual(
values = c("FALSE" = "black", "TRUE" = "red")
) +
geom_text_repel(
color = "red",
data = subset(gapminder_2007, gdpPercap > 5000 & lifeExp < 60)
) +
scale_x_continuous(name="PBI per cápita") +
scale_y_continuous(name="Esperanza de vida al nacer en años") +
theme(legend.position = "none")
# Chunk 15
summary(gapminder[,"year"]) #Los datos van desde 1952 hasta 2007
(
continent_data <- gapminder %>%
group_by(continent, country) %>%
arrange(year)
)
ggplot(continent_data, aes(x = year, y = gdpPercap, color = country)) +
geom_line() +
facet_wrap(~continent, ncol = 3) +
scale_x_continuous(name = "Año") +
scale_y_log10(
name = "PBI per cápita",
labels = scales::number_format(big.mark = ",")
) +
labs(caption =
"En Europa el PIB creció de forma bastante uniforme y exponencial. En Africa y Asia los PIB son muy dispares entre paises "
) +
theme(legend.position = "none")
